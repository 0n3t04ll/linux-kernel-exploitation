jQuery(function(){
	$(".tab-slider").append("<span class='showbtn prev'></span><span class='showbtn next'></span>");
	$('.tabs li:first-child').addClass('active');
	$(".tab-item:first-child").addClass("current");
});

// page init
jQuery(function(){
	initHeaderFix();
	initImgChange();
	initMainNav();
	initSearchForm();
	initImgLiquid();
	initTabslider();
	initAnchors();
	initShowOnscroll();
	initSameHeight();
	initCarousel();
	//if ((!$("body").hasClass("author")) || (!$("body").hasClass("search-results"))) {
		/*if (!$('body').is('.author, .search-results')){
		if($("ul").hasClass("pagination")) {
			if($("li:first-child span").hasClass("current")){$('p.small span[aria-current=page]').css('display', 'inherit');}
		
			else{ $('p.small span[aria-current=page]').css('display', 'none'); }
		}
		
	}
	else{
		if($("ul").hasClass("pagination")) {$('p.small span span+span.breadcrumb_last').css('display', 'none');}
	}*/
	if($("ul").hasClass("pagination")) {
	 $('ul.pagination li a').each(function(){
     this.href += '#bloglisting';
})
	}
});

function initHeaderFix(){
    var scroll = jQuery(document).scrollTop(),
		//header = jQuery('#header'),
		headerHeight = jQuery('#header').outerHeight();

	jQuery(window).on('scroll load', function () {
		var bodyScroll = jQuery('body').css('overflow');
		var scrolled = jQuery(document).scrollTop();
		if (scrolled > headerHeight) {
			jQuery('body').addClass('off-canvas');
		} else if (scrolled <= 1) {
			jQuery('body').removeClass('off-canvas');
		}

		if ((scrolled > scroll) && !jQuery('body.nav-active').length) {
			jQuery('body').removeClass('fixed');
		} else if ((scrolled < scroll) && (bodyScroll !== "hidden")) {
			jQuery('body').addClass('fixed');
		}
		scroll = jQuery(document).scrollTop();
	});
}

function initImgChange() {
	if ($(window).width() > 767) {
		var src = $("section .bg-stretch img").attr("src");
		if(src) {
			str = src.substring(src.lastIndexOf("."));
			src = src.replace(str, "-large.jpg");
			$("section .bg-stretch img").attr("src", src);
		}
	}
}

function initImgLiquid() {
	jQuery(".bg-stretch").imgLiquid({
		fill: true,
		verticalAlign: 'center',
		horizontalAlign: 'center'
	});
}
function initMainNav(){
	var nav = jQuery('.navbarContent'),
		navlist = nav.find('>ul'),
		drop = nav.find('.drop'),
		win = jQuery(window),
		winWidth = win.width(),
		navOpener = jQuery('.hamburger-btn'),
		activeClass = 'open',
		animSpeed = 300;

	var resizeHandler = function(){
		winWidth = win.width();
		drop.each(function(){
			this.style.marginLeft = '0px';
			var right = this.getBoundingClientRect().right;
			//console.log(bottom);
			if(right > winWidth) {
				this.style.marginLeft = -(right - winWidth)+ "px";
			}
		});
	};

	resizeHandler();
	win.on('load resize orientationchange', resizeHandler);

	navOpener.on('click', function(e){
		e.preventDefault();
		jQuery('#header').removeClass('form-open');
		jQuery('body').toggleClass('nav-open');
		//jQuery('#nav-secondary').toggleClass('nav-second-open');
	});

	/*jQuery(document).on('click', function(e) {
		if (!jQuery(e.target).closest(navOpener).length && jQuery('body').hasClass('nav-open')) {
			if (!jQuery(e.target).closest(nav).length) {
            	jQuery('body').removeClass('nav-open');
				jQuery('#nav-secondary').removeClass('nav-second-open');
			}
        }
	});*/
}

function initShowOnscroll() {
	var scrollBtn = jQuery('.back-to-top'),
		scrollIndent = 1200;
	jQuery(window).on('scroll', function() {
		var scrollTop = jQuery(window).scrollTop();
		if(scrollTop > scrollIndent) {
			scrollBtn.addClass('visible');
		} else {
			scrollBtn.removeClass('visible');
		}
	});
}

function initSearchForm() {
	var header = jQuery('#header'),
		form = jQuery('.search-form'),
		openBtn = form.find('.search-btn'),
		input = form.find('.search'),
		closeBtn = form.find('.close');

	openBtn.on('click', function(e) {
 		e.preventDefault();
		if(header.hasClass('form-open')) {
			header.removeClass('form-open');
			input.blur();
			if(input.val().length != 0)  {
				form.submit();
			}
		} else {
            header.addClass('form-open');
 			setTimeout(function(){
            	input.focus();
        	}, 100)
 		}
	});

	closeBtn.on('click', function(e) {
		e.preventDefault();
		header.removeClass('form-open');
		input.blur().val('');
	});
}

function initSameHeight() {
	jQuery('.same-height-parent').sameHeight({
		elements: '.same-height',
		flexible: true,
		multiLine: true
	});
	jQuery('.row').sameHeight({
		elements: '.heading-same-height',
		flexible: true,
		multiLine: true
	});
}

function initTabslider() {
	jQuery('.tab-slider').each(function(){
		if($('li:last',this).width()+$('li:last',this).offset().left-$('li:first',this).offset().left>$('div',this).width()){
			$('.showbtn',this).css('display','block');
			$('.showbtn.prev',this).css('opacity','0');
		}
	});
}

$(window).resize(function(){
	initTabslider();
});

// initialize smooth anchor links
function initAnchors() {
	var win = jQuery(window),
		window_height = win.height(),
       	navLinks = jQuery('.anchor-links:not(.static)'),
       	parentLinks = jQuery('.anchor-links-holder'),
       	navHeight = 135,
       	iCurScrollPos,
       	offset,
       	page = jQuery('html,body'),
       	doc_height = jQuery(document).height();
       	
	if(navLinks.length) {
       	var indent = 0;
	}

    win.on('resize', function() {
		doc_height = jQuery(document).height();
		window_height = jQuery(window).height();
    });


	win.on('scroll resize load', function() {
		iCurScrollPos = jQuery(this).scrollTop();
		if(parentLinks.length) {
			var scrollTop = parentLinks.offset().top;
			if(scrollTop > iCurScrollPos) {
				parentLinks.removeClass('fixed');
			} else {
				parentLinks.addClass('fixed');
			}
		}
		
       	addActive();
       	if(navLinks.find('ul ul').length) {
       		var childList = navLinks.find('ul ul');
   			childList.each(function() {
   				jQuery(this).closest('li').find('>a').on('click', function(e){
   					e.preventDefault();
   					jQuery(this).next('ul').find('li').first().find('a').trigger('click');
   				});
   				var actilList = jQuery(this).find('.active');
	       		if(actilList.length) {
	       			jQuery(this).closest('li').addClass('active');
	       		} else {
	       			jQuery(this).closest('li').removeClass('active');
	       		}
   			});
       	}
   	});

    if(navLinks.hasClass('left')) {
		offset= 90;
		navHeight = 90;
    } else {
		offset = indent;
    }

	jQuery('a[href^="#"]:not([href="#"], [data-toggle])').on('click', function() {
       	var target = jQuery(this.hash);
       	page.on("scroll mousedown wheel DOMMouseScroll mousewheel keyup touchmove", function(){
	       page.stop();
	   	});
     	if (location.hostname == this.hostname) {
       		if (target.length !=0) {
       			if(iCurScrollPos <= target.offset().top - offset) {
       				if(navLinks.length) {
	       				page.animate({
		                  	scrollTop: target.offset().top - navHeight
		             	}, 800);
       				} else {
       					page.animate({
		                  	scrollTop: target.offset().top
		             	}, 800);
       				}
				} else {
					if(navLinks.length) {
						page.animate({
		                  	scrollTop: target.offset().top - navHeight - indent
		             	}, 800);
					} else {
						page.animate({
		                  	scrollTop: target.offset().top - 70
		             	}, 800);
					}
				}
               	return false;
           }
     	}
    });

   // add active class to identify what section is currently being selected
   	function addActive() {
     	var scrollPos = win.scrollTop();
     	jQuery('#main > *, .summary-table').each(function(){
     		var delta = navHeight,
     			section = jQuery(this),
       			top = section.offset().top - delta - offset - 1,
	           	bottom = top + section.outerHeight();
       		if (scrollPos >= top && scrollPos <= bottom) {
       			if(navLinks.find('a[href="#'+ jQuery(this).attr('id') + '"]:not([data-toggle])').length) {
	         		navLinks.find('li').removeClass('active');
         			navLinks.find('a[href="#'+ jQuery(this).attr('id') + '"]:not([data-toggle])').closest('li').addClass('active');
       			}
       		}
       		else if (scrollPos + window_height == doc_height) {
	         	if (!navLinks.find('li:last a[href^="#"]:not([data-toggle])').closest('li.active')) {
           			navLinks.find('li').removeClass('active');
           			navLinks.find('li:last a[href^="#"]:not([data-toggle])').closest('li').addClass('active');
         		}
       		}
     	});
   	}
}

function initCarousel() {
	jQuery('.single-carousel').slick({
		dots: true,
		infinite: true,
		speed: 500,
		arrows: false,
		cssEase: 'linear'
	});
	jQuery('.logo-carousel-single').slick({
		dots: false,
		infinite: true,
		slidesToShow: 1,
		slidesToScroll: 1,
		responsive: [{
			breakpoint: 1023,
			settings: {
				slidesToShow: 1
			}
		},{
			breakpoint: 767,
			settings: {
				slidesToShow: 1
			}
		},{
			breakpoint: 480,
			settings: {
				slidesToShow: 1
			}
		}]
	});
 	jQuery('.logo-carousel-five').slick({
		dots: false,
		infinite: true,
		slidesToShow: 5,
		slidesToScroll: 1,
		responsive: [{
			breakpoint: 1023,
			settings: {
				slidesToShow: 5
			}
		},{
			breakpoint: 767,
			settings: {
				slidesToShow: 2
			}
		},{
			breakpoint: 480,
			settings: {
				slidesToShow: 1
			}
		}]
	});
	jQuery('.logo-carousel').slick({
		dots: false,
		infinite: true,
		slidesToShow: 3,
		slidesToScroll: 1,
		responsive: [{
			breakpoint: 1023,
			settings: {
				slidesToShow: 3
			}
		},{
			breakpoint: 767,
			settings: {
				slidesToShow: 2
			}
		},{
			breakpoint: 480,
			settings: {
				slidesToShow: 1
			}
		}]
	});
}

/*** Brightcove HTML5 Video Implementation Start ***/
$(function() {
	var isVideoTriggeredFlag = false;
	var bc_popupContainer = "<div id='videoOverlayContainer'><div id='int_videoFrame'><div class='containing-block'><a class='videoOverlayContainerClose'></a><div class='inner-container'></div></div> </div></div>";
	$("body").on("click","a.fancybox",function(e){
		if(!isVideoTriggeredFlag){
			isVideoTriggeredFlag = true;
			e.preventDefault();
			 if (typeof e.stopPropagation == "function") {
				e.stopPropagation();
			} else {
				e.cancelBubble = true;
			}
			var crrnt_href = $(this).attr("href");
			var videoid = /bctid=/g.test(crrnt_href)?crrnt_href.split("bctid=")[1]:(/videoId=/g.test(crrnt_href)?crrnt_href.split("videoId=")[1]: "");
			if(videoid){
				videoid = videoid.split("&")[0];
			}
			$("body").append(bc_popupContainer);	
			// namespace to keep the global clear of clutter
			var BCL = {};
			var myPlayer,
				playerHTML,
				playerData = {
				'accountId': '21712694001',
				'playerId': 'Sypf9RNV',
				'videoId': videoid
				};
			
			if(crrnt_href.match(/\/[0-9]{11}\//) != null){
				var crrnt_accountID = crrnt_href.match(/\/[0-9]{11}\//)[0];
				crrnt_accountID = crrnt_accountID.replace(/[\|/]/g,"");
				if(playerData.accountId != crrnt_accountID){
					playerData.accountId  = crrnt_accountID;
					if(/_default\//.test(crrnt_href)){					
						var crrnt_playerID = crrnt_href.split("_default/")[0];
						playerData.playerId = crrnt_playerID.split(playerData.accountId +"/")[1];
					}
				}
			}

			BCL.addPlayer = function () {
				// dynamically build the player video element
				playerHTML = "<div style=\"display: block; position: relative; max-width: 100%;\"><div style=\"padding-top: 56.25%;\">";
				playerHTML += '<video id=\"lightbox_bcvideo\" data-account=\"' + playerData.accountId + '\" data-video-id=\"' + playerData.videoId + '\" data-player=\"' + playerData.playerId + '\" data-embed=\"default\" class=\"video-js\" controls preload="auto" autoplay style="width: 100%; height: 100%; position: absolute; top: 0px; bottom: 0px; right: 0px; left: 0px;"></video>';	
				playerHTML += "</div></div>";
				// inject the player code into the DOM
				$("#int_videoFrame .inner-container").html(playerHTML);
				// add and execute the player script tag
				var s = document.createElement('script');
				s.src = "//players.brightcove.net/" + playerData.accountId + "/" + playerData.playerId + "_default/index.min.js?"+new Date().getTime();
				document.body.appendChild(s);
				s.onload= callback;
			}
			
			function callback(){
				bindVideoTrackers(videojs("lightbox_bcvideo"));
			}
		
			BCL.addPlayer();				
			resizePlayer();
			repositionPlayer();
		}else{return false;}
	});

	$("a.videoOverlayContainerClose").on("click",function(e){
		e.preventDefault();
		if($("#videoOverlayContainer").length > 0){
			isVideoTriggeredFlag = false;
			videojs("lightbox_bcvideo").dispose();
			$("#videoOverlayContainer").remove();
		}
	});

	$('body').on('click', '#videoOverlayContainer', function(e) {
		if(e.target.id == "int_videoFrame" || e.target.id == "videoOverlayContainer" || e.target.className == "videoOverlayContainerClose"){
			isVideoTriggeredFlag = false;
			videojs("lightbox_bcvideo").dispose();
			$(this).remove();
		};
	});

	$(window).on("orientationchange",function(){
		repositionPlayer();
	});
});

// Binding events to the new HTML5 Video Player
$(document).ready(function() {
	if(typeof(videojs) == "function"){
		$.each(videojs.players,function(){bindVideoTrackers(this)});
	}
});

function bindVideoTrackers(vidEl){
		vidEl["percentsAlreadyTracked"] = [];
		var eventCategory="Videos", eventLabel="", eventAction="";
		loaded = function () {
			//eventLabel = vidEl.mediainfo.id + ':' + vidEl.mediainfo.name;
			eventLabel = vidEl.mediainfo.name;
			//utag.link({"ga_eventCategory": eventCategory, "ga_eventLabel": eventLabel, "ga_eventAction": 'load'});
			//trackGaEvent ("Videos", "load", eventLabel);
		};
		timeupdate = function () {
			var currentTime, duration, percent, percentPlayed, _i;
			currentTime = Math.round(vidEl.currentTime());
			duration = Math.round(vidEl.duration());
			percentPlayed = Math.round(currentTime / duration * 100);
			var trackingPosArr = [25,50,75,90,95,100];
			trackingPosArr = trackingPosArr.sort();
			eventLabel = vidEl.mediainfo.name;
			if (percentPlayed !== 0) {
				for(var i=0;i<trackingPosArr.length;i++){
					if((percentPlayed == trackingPosArr[i] && vidEl.percentsAlreadyTracked.indexOf(trackingPosArr[i]) == -1)|| (percentPlayed > trackingPosArr[i] && vidEl.percentsAlreadyTracked.indexOf(trackingPosArr[i]) == -1)){
						vidEl.percentsAlreadyTracked.push(trackingPosArr[i]);
						trackGaEvent ("Videos", "video:"+trackingPosArr[i]+"% complete", eventLabel); 
						//utag.link({"ga_eventCategory": eventCategory, "ga_eventLabel": eventLabel, "ga_eventAction": 'play:'+percent, "video_25" : 1});
					}
				}
			}			
		};
		end = function () {
			eventLabel = vidEl.mediainfo.id + ':' + vidEl.mediainfo.name;
			//utag.link({"ga_eventCategory": eventCategory, "ga_eventLabel": eventLabel, "ga_eventAction": 'complete', 'video_100':1});							
		};
		play = function () {
			eventLabel = vidEl.mediainfo.name;
			//utag.link({"ga_eventCategory": eventCategory, "ga_eventLabel": eventLabel, "ga_eventAction": 'play'});
			trackGaEvent ("Videos", "video: play", eventLabel);
		};
		pause = function () {
			eventLabel = vidEl.mediainfo.id + ':' + vidEl.mediainfo.name;
			//utag.link({"ga_eventCategory": eventCategory, "ga_eventLabel": eventLabel, "ga_eventAction": 'pause'});							
		};
		resize = function () {
			eventLabel = vidEl.mediainfo.id + ':' + vidEl.mediainfo.name;
			//utag.link({"ga_eventCategory": eventCategory, "ga_eventLabel": eventLabel, "ga_eventAction": 'Resize'});							
		};
		error = function () {
			eventLabel = vidEl.mediainfo.id + ':' + vidEl.mediainfo.name;
			//utag.link({"ga_eventCategory": eventCategory, "ga_eventLabel": eventLabel, "ga_eventAction": 'error'});							
		};
		fullscreen = function () {
			eventLabel = vidEl.mediainfo.id + ':' + vidEl.mediainfo.name;
			//utag.link({"ga_eventCategory": eventCategory, "ga_eventLabel": eventLabel, "ga_eventAction": 'fullscreen'});							
		};
							
	  vidEl.on("loadedmetadata", loaded);
	  vidEl.on("timeupdate", timeupdate);
	  vidEl.on("ended", end);
	  vidEl.on("play", play);
	  vidEl.on("pause", pause);
	//vidEl.on("volumechange", volumeChange);
	  vidEl.on("resize", resize);
	  vidEl.on("error", error);
	  vidEl.on("fullscreenchange", fullscreen);
}

function resizePlayer(){
	var screenHeight = window.innerHeight - 50;
	var screenWidth = window.innerWidth;
	var playerHeight = $("#int_videoFrame .containing-block").height();
	var playerWidth = $("#int_videoFrame .containing-block").width();
	if(playerHeight >= screenHeight || (playerHeight+50) < screenHeight || playerWidth > screenWidth*0.80){
		var newPlayerWidth = (playerWidth/playerHeight)*screenHeight;	
		var optPlayerWidth = screenWidth*0.80;
		if(newPlayerWidth <= optPlayerWidth){
			$("#int_videoFrame .containing-block").css("width",newPlayerWidth);
		}else{
			$("#int_videoFrame .containing-block").css("width",optPlayerWidth);
		}
	}
	repositionPlayer();
}

function repositionPlayer(){
	var screenHeight = $(window).height();
	var videoPlayerHeight = $("#int_videoFrame .containing-block").height();
	if(screenHeight > videoPlayerHeight){
		var effectiveMargin = (screenHeight - videoPlayerHeight)/2;
		if(effectiveMargin > 200){
			effectiveMargin = 200;
		}
		$("#int_videoFrame").css({"marginTop":(effectiveMargin) + "px"})
	}
}
 
$(window).resize(function() {
	resizePlayer();
});
  
/*** Brightcove HTML5 Video Implementation End ***/

( function() {
		var bindEvents = function() {
		$(document).on('click', '.dropdown', function(e) {
			//e.preventDefault();
			$('.dropdown.open').not(e.currentTarget).removeClass('open');
			$(e.currentTarget).toggleClass('open');
			return true;
		});
		$(document).on('click', function(e) {
			var menu = $(e.target).closest('.dropdown');
			if (menu.length < 1) {
				$('.dropdown').removeClass('open');
			}
		});
	};
	var __main = function() {
		bindEvents();
	};

	$(document).ready(function() {
		__main();
	});
}());
	
$("document").ready(function(){
	
	$(window).resize(function() {
	  if ( $(window).width() > 1024) {
		  jQuery('body').removeClass('nav-open');
		  jQuery('#nav-secondary').removeClass('nav-second-open');
	  }
	});
	
	var hrefParam = window.location.href;
	if(hrefParam && /tab\=/.test(hrefParam)){
		var match = RegExp("tab=([^&]*)").exec(hrefParam);
        var tName= match && decodeURIComponent(match[1].replace(/\+/g, " "));
		$("ul li a[data-tab='"+tName+"']").trigger("click");
	};
	
	$(".tabs li").click(function() {
		$('.tabs li').removeClass('active');
		$(this).addClass("active");
		$(".tab-item").removeClass("current");
		var selected_tab = $(this).find("a").attr("data-tab");
		$("#"+selected_tab).addClass("current");
		$('.slick-slider').slick('setPosition');
		return false;
	});
	
	$(function(){
		var current = location.pathname;
		$('.anchors li').removeClass('active');
		$('.anchors li a').each(function(){
			if($(this).attr('href').indexOf(current) !== -1){
				$(this).parent('li').addClass('active');
			}
		})
	});
	
	$(".tab-slider .next").click(function(){
		var $div =$('div',this.parentNode)
			,maxoffset = $('li:last',$div).width()+$('li:last',$div).offset().left - $('li:first',$div).offset().left - $div.width()
			,offset = Math.abs(parseInt( $('ul',$div).css('marginLeft') ))
			,diff = $div.width();

		if( offset >= maxoffset )
			return;
		else if ( offset + diff >= maxoffset ){
			diff = maxoffset - offset + 20;
			$(this).css({'opacity': '0', 'display': 'none'});
		}
		$('.prev', this.parentNode).css({'opacity': '1', 'display': 'block'});
		$("ul", $(this).parent() ).animate({
			marginLeft: "-=" + diff
		},400, 'swing');
	});
	
	$(".tab-slider .prev").click(function(){
		var offset = Math.abs(parseInt( $('ul',this.parentNode).css('marginLeft') ));
		var diff = $('div',this.parentNode).width();
		if( offset <= 0 )
			return;
		else if ( offset - diff <= 0 ){
			$(this).css({'opacity': '0', 'display': 'none'});		
			diff = offset;
		}
		$('.next', this.parentNode).css({'opacity': '1', 'display': 'block'});
		$("ul",$(this).parent()).animate({
			marginLeft: '+='+diff
		},400, 'swing');
	});

});

(function($) {
	"use strict";
	var $headerHeight = $("#header");
	if($(".anchor-links").length > 0 ){
		var $navbar = $(".anchor-links"),
		y_pos = $navbar.offset().top,
		height = $navbar.height() + $headerHeight.height() + 10;

		$(document).scroll(function() {
			var scrollTop = $(this).scrollTop();

			if (scrollTop > y_pos - height) {
				$navbar.addClass("affixed");
			} else if (scrollTop <= y_pos) {
				$navbar.removeClass("affixed").clearQueue();
			}
		});
	}
})(jQuery, undefined);

function getHrefParamVal(paramName) {
    var crrnt_href = window.location.href;
    var testpatt = new RegExp(paramName + "=","i");
    var param_val = "";
    if (testpatt.test(crrnt_href)) {
        paramName = (crrnt_href.match(testpatt)[0]).replace("=", "");
        param_val = crrnt_href.split(paramName + "=")[1];
        param_val = (param_val.length > 0) ? param_val.split("&")[0] : ""
    }
    return param_val
}

function updateQueryStringParam(uri, key, value) {
    if (value != "") {
        var URLparts;
        var tempURL = uri;
        var hasHash = false;
        if (uri.indexOf("#") > 3) {
            URLparts = uri.split("#");
            tempURL = URLparts[0];
            hasHash = true
        }
        var re = new RegExp("([?|&])" + key + "=.*?(&|$)","i");
        separator = tempURL.indexOf("?") !== -1 ? "&" : "?";
        if (tempURL.match(re)) {
            tempURL = tempURL.replace(re, "$1" + key + "=" + value + "$2")
        } else {
            tempURL = tempURL + separator + key + "=" + value
        }
        if (hasHash) {
            tempURL = tempURL + "#" + URLparts[1] + ""
        }
        return tempURL
    } else {
        return uri
    }
}

$(document).ready(function() {
    var externalCampaign = getHrefParamVal("eid");
    var smcidVal = getHrefParamVal("smcid");
    var tagVal = getHrefParamVal("tag");
    var hrefParamMapper = {
        eid: externalCampaign,
        smcid: smcidVal,
        tag: tagVal
    };
    if (externalCampaign != "") {
        $("a[href*='/forms/gated-form.html'], a[href*='/forms/nurture-gated-form.html'], a[href*='/forms/preferences/communication.html'], a[href*='/forms/contact-me.html'], a.eid").each(function() {
            var mainAsset = this.href;
            for (var paramName in hrefParamMapper) {
                if (hrefParamMapper[paramName] !== "") {
                    if (mainAsset.toLowerCase().indexOf(paramName) < 0) {
                        if (mainAsset.toLowerCase().indexOf("?") < 0) {
                            mainAsset = mainAsset + "?" + paramName + "=" + hrefParamMapper[paramName]
                        } else {
                            mainAsset = mainAsset + "&" + paramName + "=" + hrefParamMapper[paramName]
                        }
                    } else {
                        mainAsset = updateQueryStringParam(mainAsset, paramName, hrefParamMapper[paramName])
                    }
                }
            }
            this.href = mainAsset
        })
    }
});


if (jQuery(window).width() < 1024){
	jQuery("li.enterprise > a").attr("href", "/enterprise/en-us/home.html")
};

/* JS Code to bind M.com search with Ton navigation search box */
/* START */
var headerSearchBar=(function(){var onSubmitHeaderClick=function(){if($("#q").val()!=undefined&&$("#q").val()!=""&&$("#q").val().length>0){var field="q";var inputParam=$("#q").val();var newSrc=inputParam;var strlUrl=$("#header-search-button").attr("data-result-path");var endsWith=strlUrl.slice(strlUrl.length-1,strlUrl.length);if(endsWith=="="){strlUrl=strlUrl.concat("#")}if((strlUrl.indexOf("?"+field+"=")!=-1)||(strlUrl.indexOf("&"+field+"=")!=-1)){var newURL=updateQueryStringParameter(strlUrl,field,newSrc)}else{if(strlUrl.indexOf("?")!=-1){var newURL=strlUrl+"&q="+newSrc}else{var newURL=strlUrl+"?q="+newSrc}}window.location=newURL}};return{onSubmitHeaderClick:onSubmitHeaderClick}})();$(document).ready(function(){if($("#q").length>0){ajaxAutoSuggest();headerSearchBar.onSubmitHeaderClick()}$("#header-search-button").on("click",function(e){e.preventDefault();headerSearchBar.onSubmitHeaderClick()});$("#q").on("keypress",function(e){if(e.keyCode==13){e.preventDefault();headerSearchBar.onSubmitHeaderClick()}})});function ajaxAutoSuggest(){var locale=window.location.href.replace(/.*enterprise\//,"").replace(/\/.*/,"");var queryData={requestType:"autosuggest",locale:locale};$.ajax({type:"GET",url:"/bin/SearchResult",data:queryData,cache:false,success:function(result){if(result!=null&&result.ErrorCode==null){if($("#q").length>0){addAutoSuggest($("#q"),result,"q")}}},error:function(result){console.log("AutoSuggest JSON not accessible")}})}function sortAutoSuggestObject(obj,term){var arr=[];var prop;term=decodeURI(term);for(prop in obj){var re=new RegExp("^"+term,"gi");var decodedProp=decodeURI(prop.trim());if(re.test(decodedProp)){arr.push({key:decodedProp,value:obj[prop]})}}arr.sort(function(a,b){if((parseInt(b.value,10)-parseInt(a.value,10))!==0){return parseInt(b.value,10)-parseInt(a.value,10)}else{if(a.key.toUpperCase()>b.key.toUpperCase()){return 1}if(a.key.toUpperCase()<b.key.toUpperCase()){return -1}return 0}});var uniqueEle=new Map();for(index in arr){uniqueEle.set(arr[index].key.toLowerCase(),arr[index].key)}arr=Array.from(uniqueEle.values());if(arr.length>6){arr.length=6}arr.sort(function(x,y){var a=String(x).toUpperCase();var b=String(y).toUpperCase();if(a>b){return 1}if(a<b){return -1}return 0});return arr}function addAutoSuggest(elem,result,id){$("#"+id).autocomplete({minLength:2,source:function(request,response){var term=request.term.replace(/\\/g,"\\\\");term="("+term+")";response(sortAutoSuggestObject(result,term))}}).data("ui-autocomplete")._renderItem=function(ul,item){var term=this.element.val();term=term.replace(/\\/g,"\\\\");term=decodeURI(term);term="("+term+")";var re=new RegExp("^"+term,"gi");var t=item.label.trim().replace(re,"<b>$1</b>");return $("<li></li>").data("item.autocomplete",item).append("<div onclick=\"callSearch('"+item.label.trim()+"','"+id+"'); return false;\">"+t+"</div>").appendTo(ul)};if(id==="q"){$("#"+id).autocomplete("option","appendTo",".search-form")}}function updateQueryStringParameter(uri,key,value){var re=new RegExp("([?&])"+key+"=.*?(&|$)","i");var separator=uri.indexOf("?")!==-1?"&":"?";if(uri.match(re)){return uri.replace(re,"$1"+key+"="+value+"$2")}else{return uri+separator+key+"="+value}}function callSearch(data,id){$("#"+id).val(data);if(id==="q"){headerSearchBar.onSubmitHeaderClick()}};

/* END */


if ($('.hero.title h1').text().length > 80) {
	$('.hero.title').css('position', 'relative');
	$('.hero.title').css('padding-bottom', '30px');
	$('.hero.title + *').css('margin-top', '0px');
	$('.hero.title').css('height', 'auto');
	$('.hero.title h1').css('margin', '20px auto');
	}