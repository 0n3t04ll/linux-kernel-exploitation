jQuery( function ( $) {
    'use strict';

  // mobile menu background
  $('body').append('<div class="menu-wrapper"></div>');

  	////events
	$('#mobile-primary-nav a .sf-sub-indicator').click(function(){
		$(this).parent().parent().toggleClass('open');
		$(this).parent().parent().find('> ul').stop(true,true).slideToggle();
		return false;
	});

  // activate search field
  $('.btn-search').on('click', function(){
    const $search = $('.navbar-expand-md');
    const $menu = $(' #navbarsMenu');
    const $menuWrapper = $('.menu-wrapper');
    $menu.removeClass('menu-opened');
    $menuWrapper.removeClass('show-wrapper');
    $search.toggleClass('search-opened');
  });

  // activate mobile menu
  $('.btn-menu').on('click', function(){
    const $menu = $(' #navbarsMenu');
    const $menuWrapper = $('.menu-wrapper');
    const $search = $('.navbar-expand-md');
    $search.removeClass('search-opened');
    $menu.toggleClass('menu-opened');
    $menuWrapper.toggleClass('show-wrapper');
  });

  // close header search 
  $('.btn-close').on('click', function(e){
    const header = $('.navbar-expand-md');
    header.removeClass('search-opened');
  });

  // visual effect
  $('.bold-underline').append('<span></span>');

  // main carousel
  $('.main-hero-carousel').slick({ 
    dots: true,
    adaptiveHeight: true,
    responsive: [
      {
        breakpoint: 973,
        settings: {
          adaptiveHeight: false,
          dots: false
        }
      }
    ]
    });

  // twitter carousel
  $('.twitter-carousel').slick();

  // twitter carousel
  $('.featured-carousel').slick({
    infinite: true,
    slidesToShow: 3,
    arrow: false,
    responsive: [
      {
        breakpoint: 1200,
        settings: {
          slidesToShow: 2
        }
      },
      {
        breakpoint: 1000,
        settings: {
          slidesToShow: 1
        }
      }
    ]
  });
	
 //Author's Bio Carousel
 $('.authors-carousel').slick({
   dots: true,
   adaptiveHeight: true
 });

  // adjust hero image size on small screens
  $(window).on('load resize', function() {

    setTimeout(function() {

      let mainHeroSize = $('.main-hero').innerWidth();

      if( mainHeroSize <= 973 ){
  
        let imageHolderWidth = $('.main-hero .image-holder').innerWidth();
        let imageHolderRatio = imageHolderWidth * 0.75;
        let imageNewHeight = imageHolderWidth - imageHolderRatio;
  
        $( '.main-hero .image-holder' ).css( 'height', imageNewHeight );

      } else {
        
        $('.main-hero .image-holder').css('height', 'auto');
    
      }
      //console.log(mainHeroSize);

    }, 100);

  });

  $(window).scroll(function(){
  
    // sticky supporting nav functionality
    const s = $('.supporting-nav-wrap');
    const b = $('body');

    // current height of main hero
    const mainHero = $('.main-hero').outerHeight();

    let sWindowPos = $(window).scrollTop();
  
    // add sticky class if passed main hero
    if (sWindowPos >= mainHero){
      s.addClass('stick');
    }
    else {
    // remove sticky class
      s.removeClass('stick');
    } 
    if (sWindowPos >= 1 ){
    // add small nav class on scroll
      b.addClass('small-nav');
    }
    // remove small nav class on very top
    else {
      b.removeClass('small-nav');
      s.removeClass('stick');
    }
  });
	
	$('#pagination-top').html($('#pagination-bottom').html());
	
	$('.inner-nav-link').click(function() {
    	var sectionTo = $(this).attr('href');
    	$('html, body').animate({
      	scrollTop: $(sectionTo).offset().top - 210
    	}, 1500);
  });

});

